
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="../dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="theme.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="../dist/js/bootstrap.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">
    
    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">5% Complete</span></div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>
      
      <div class="well" style="width:800px; margin: 0 auto">

	
	<p> In this experiment, we'll be playing a guessing game. The
	game has two roles, which will be assigned randomly. Since you
	will not know which role you will play until the game starts,
	you will be responsible for understanding both roles.  </p>

	<p> If you are the first person to arrive in a game, you must wait
	for another player to join. Once both players have
	joined the game, you will see a display like the
	following: </p>

	<p>
	  <center><img src="images/guesserViewStart.jpg" alt="Example gameplay" style="width:730px;height:367.5px"></center>
	</p>

	<p> On the right side of the screen, you will see a workspace
	filled with various objects and messages. On the left side of
	the screen, you will see a chat window that will contain
	messages sent between you and the other player. </p>
	
	<h3> Guesser instructions </h3>

	<p> There are four objects, each hidden behind a gate. These
	four objects are shown on a wheel. This wheel will spin and
	randomly pick out one of the objects for you to find. For
	example, if it lands on a picture of a house cat, you must try to guess which
	gate has that picture behind it. </p>

	<p> If you had to guess without any further information, you
	wouldn't stand much of a chance. Luckily, you
	are playing with a helper, who knows exactly what is behind
	each gate. You have the opportunity to ask them a single
	question before you guess. Just drag the words in the bottom
	of the "question box" onto the line to form a question, and
	then click the 'send' button! </p>

	</p> The helper can then 'reveal' one of the gates, telling you
	what's behind it. Once you receive their answer, you will
	click on one of the gates to make your guess. Finally, you
	will find out whether you guessed correctly! </p>

	<h3> Helper instructions </h3>

	<p> If you are the "helper", you will see a different screen,
	shown below. You don't know which object the guesser is trying
	to find, but you know where all of the objects are located!
	You will watch them drag words up to the line in the question
	box and then see their question appear in the left side of the
	screen. Based on this question, you will select one of the
	four gates and click the "send" button. Sometimes their
	question will seem too vague to answer perfectly, but keep an
	eye on the question box and think about why they might have
	picked one question instead of another. </p>

	<p>
	  <center><img src="images/helperView.png" alt="helper view" style="width:602.5px;height:298.5px"></center>
	</p>	

	There will be 12 rounds. Once each round, the wheel will
	randomly pick a new object for the guesser to find (which may
	or may not be the same as a previous round) and locations of
	objects are randomly shuffled from round to round. This means
	that the information the helper gives on one round is
	completely irrelevant to the locations of items in the next
	round! Once another player joins, the experiment should take
	about 8 minutes.
	
      </div>
      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">
	</br>
	The guesser's goal in this game is to
	  </br>
	  <input type="radio" name="dgoal" value="yes"> Find the specified item
	  </br>
	  <input type="radio" name="dgoal" value="no"> Answer the other player's question by revealing an object
	  </br>


	</br>
	The helper's goal in this game is to 
      </br>
      <input type="radio" name="mgoal" value="no"> Find the specified item
      </br>
      <input type="radio" name="mgoal" value="yes"> Answer the other player's question by revealing an object
      </br>

      
      
	  </br> The helper gets to see
	  </br>
	  <input type="radio" name="occ" value="no"> The locations of all the objects, but <strong> not </strong> the possible questions that could be asked.
	  </br>
	  <input type="radio" name="occ" value="yes"> The locations of all the objects, <strong> and </strong> the possible questions that could be asked.
	  </br>
	    <input type="radio" name="occ" value="no"> <strong> Neither </strong> the locations of objects, nor the questions that could be asked.
	  </br>
	  

      </br> To ask a question, the guesser must
      </br>
	<input type="radio" name="move" value="yes"> Drag words in the "question box" onto the line, then click "send"
	  </br>
	    <input type="radio" name="move" value="no"> Use their keyboard to type it out 
       </br>

       </br> 
       At the end of a round
       </br>
       <input type="radio" name="comp" value="no"> All objects stay in the same location, but there are new questions or goals
       </br>
       <input type="radio" name="comp" value="yes"> Objects are randomly shuffled and new goals are randomly selected
       </br>
	  
          </br>
	  Have you participated in this study before? </br>
	  <input type="radio" name="completed" value="yes"> Yes
          </br>
	  <input type="radio" name="completed" value="no"> No
          </br>

	  </br>
	  <input id="quiz_submit" type="submit" value="Submit"> 
		  </br>
		  </br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
    </div> <!-- /container -->
      </div>
    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);
      
      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="comp"]:checked').val();
        var ans2 = $('input[name="move"]:checked').val();
        var ans3 = $('input[name="mgoal"]:checked').val();
        var ans4 = $('input[name="dgoal"]:checked').val();
        var ans5 = $('input[name="occ"]:checked').val();
        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" && 
           ans4 == "yes" && ans5 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 1) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>
    
    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  </body>
</html>
