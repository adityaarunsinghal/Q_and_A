
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="/lib/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- Custom styles for this template -->
    <link href="theme.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
	     aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
	  <span class="sr-only">5% Complete</span>
	</div>
      </div>
      
      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<h2><center>Find the cards!</center>  </h2>

	<p>
	  In this experiment you will play a communication game with
	  another turker! You will need to help one another to achieve
	  your goals.
	</p>

	<p>
	  You will both see a 4 x 4 grid containing some
	  cards and will take turns playing the roles of 'seeker' and
	  'helper.' In every round of the game, the seeker will be
	  given a goal: to find a specific set of goal cards in the
	  grid. They will either be looking for 1 or 2 cards.
	  However, the seeker is trapped in a fog and cannot see
	  where <b>any</b> of the cards are! The helper knows where
	  all the cards are but does not know which ones the seeker is
	  trying to find.
	</p>

	<p>
	  <center>
	    <img src="images/cardViews.png" alt="Example objects"
		 style="width:400px; height:225px">
	  </center>
	</p>

	<p>
	  There are two things you need to know to succeed.
	</p>

	<ol>
	  <li>
	    <b>Both the seeker and the helper can see the list of
	      possible goals</b>. So the helper knows the seeker is trying to
	    obtain one of these sets but does not know which one:
	  </li>
	  <p>
	    <center>
	      <img src="images/goalViews.png" alt="Example goals"
		   style="width:400px; height:280px">
	    </center>
	  </p>
	  <li>
	    The seeker is able to <b>ask the helper</b> a
	    question about the location of a card. Specifically, the
	    seeker must choose a card to ask about and type its full
	    name to complete the question: "Where is the ...?"
	    <p>
	      <center>
		<img src="images/message.png" alt="Example objects"
		     style="width:292px; height:102px">
	      </center>
	    </p>

	    <p>
	      The helper will then see this question and select which
	      cards to reveal (by clicking on the cards, and then on the
	      'REVEAL' button). They will need to wait until the seeker
	      has sent a question before being able to click anything.
	    </p>
	    <p>
	      <center>
		<img src="images/response.png" alt="reveal"
		     style="width:300px; height:349px">
	      </center>
	    </p>
	  </li>
	</ol>	

	<p>
	  On every round, it is possible to achieve the goal in a
	  single exchange. This is how you get the maximum <b>bonus of
	  $0.05</b>. When the card or cards in the speaker's goal are
	  revealed, you will <b>switch roles</b> and advance to the
	  next round. Otherwise, the seeker must choose another card
	  to ask about until the goal cards are revealed. For every
	  extra follow-up question the seeker needs to ask, and for
	  every extra card not in the goal that the helper reveals,
	  your bonus will decrease by $0.01, so pay attention to your
	  choices!
	</p>

	<p>
	  There are a total of <b>6 rounds</b>. After the final round
	  you will answer a few more questions and be on your way.
	</p>
	
	<p>
	  A few final notes: First, since you are playing with
	  another player, you may see a screen like this before the game
	  begins:
	<p>
	  <center><img src="images/waitScreen.png" alt="initial matcher's board"
		       style="width:700px;height:150px">
	  </center>
	</p>
	Just hold tight. Another player should join the game within
	the next few minutes. If you're in the waiting room 5 minutes
	without another player joining, please return the HIT and try
	again later!
	</p>

	<p>
	  Second, please be respectful of the worker you're playing
	  with: their bonus payment depends on your performance as
	  well, so please pay close attention and try to be as
	  responsive and helpful as possible.
	</p>
	
	<p>
	  Finally, please DO NOT refresh the page at any point once
	  you start the game (including the waiting page). If you
	  refresh, you will not be able to rejoin the game you were in
	  and you may not be able to submit the HIT. <br> Thank you!
	</p>

	<h3>
	  Please fill out this short quiz below before getting started.
	  Good luck and have fun!
	</h3>
	
      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">
	
	<br>
	The <b>Seeker</b> can click on cards to reveal.
	<br>
	<input type="radio" name="dgoal" value="no"> True
	<br>
	<input type="radio" name="dgoal" value="yes"> False
	<br>


	<br>
	The <b>Helper</b> aims to reveal the cards in the Seeker's goal set and no others.
	<br>
	<input type="radio" name="mgoal" value="yes"> True
	<br>
	<input type="radio" name="mgoal" value="no"> False
	<br>

	<br>
	The Seeker must pick a single card to ask about (i.e. Where is the <b>jack of hearts</b>?)
	<br>
	<input type="radio" name="message" value="yes"> True
	<br>
	<input type="radio" name="message" value="no"> False
	<br>

	<br>
	There are a total of 200 rounds.
	<br>
	<input type="radio" name="comp" value="no"> True
	<br>
	<input type="radio" name="comp" value="yes"> False
	<br>

	<br>
	The seeker and helper are both aware of all the possible goals the seeker might have on each round.
	<br>
	<input type="radio" name="location" value="yes"> True
	<br>
	<input type="radio" name="location" value="no"> False
	<br>

	<br>
	Have you participated in this study before?
        <br>
        <input type="radio" name="completed" value="no"> Yes
        <br>
        <input type="radio" name="completed" value="yes"> No
        <br>

	<br>
	<input id="quiz_submit" type="submit" value="Submit">
	<br>
	<br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
      </div> <!-- /container -->
    </div>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="message"]:checked').val();
        var ans4 = $('input[name="comp"]:checked').val();
        var ans5 = $('input[name="location"]:checked').val();
        var ans6 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" && 
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes") { 
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="/lib/js/bootstrap.min.js"></script>
  </body>
</html>
