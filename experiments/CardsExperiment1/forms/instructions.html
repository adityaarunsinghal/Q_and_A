
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="/lib/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <style>
      p {
      font-size: 18px;
      }

      li {
      font-size: 18px;
      }
</style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
2A	     aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
	  <span class="sr-only">5% Complete</span>
	</div>
      </div>
      
      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<h2><center>Complete the combo!</center>  </h2>

	<p>
	  In this experiment you will play a communication game with
	  another turker! 
	</p>

	<p>
	  You will both see a 4 x 4 grid containing cards and will
	  take turns playing the roles of 'seeker' and 'helper.' In
	  every round of the game, the seeker will be given a goal: to
	  find a specific combination of cards in the grid. There will
	  either be 1 or 2 cards in this combo.  However, the seeker
	  is trapped in a fog and cannot see where <b>any</b> of the
	  cards are! The helper, on the other hand, knows where all
	  the cards are but does not know which ones the seeker is
	  trying to find.
	</p>

	<p>
	  <center>
	    <img src="images/cardViews.png" alt="Example objects"
		 style="width:400px; height:225px">
	  </center>
	</p>

	<p>
	  There are two things you need to know to succeed.
	</p>

	<ol>
	  <li>
	    <b>Both the seeker and the helper can see the list of
	      possible combos</b>. The seeker will see their target
	      combo highlighted in a green box. These are the cards
	      they are trying to find.  The helper knows the seeker is
	      trying to obtain one of the combos in the list but does
	      not know which one.
	  </li>
	</ol>
	<p>
	  <center>
	    <img src="images/goalViews.png" alt="Example goals"
		 style="width:400px; height:235px">
	  </center>
	</p>
	<ol start="2">
	  <li>
	    The seeker is able to <b>ask the helper a
	    question</b> about the location of a card. The
	    seeker must choose a card to ask about and type its full
	    name to complete the question: "Where is the ...?"
	    <p>
	      <center>
		<img src="images/message.png" alt="Example objects"
		     style="width:292px; height:102px">
	      </center>
	    </p>

	    <p>
	      The helper will then see this question and select <b>one or
		two</b> cards to reveal to complete the target combo (by clicking on
	      the cards, and then on the 'REVEAL' button when
	      ready). They will need to wait until the seeker has sent
	      a question before being able to click anything.
	    </p>
	    <p>
	      <center>
		<img src="images/response.png" alt="reveal"
		     style="width:300px; height:349px">
	      </center>
	    </p>
	  </li>
	</ol>	

	<p>
	  On every round, if the seeker asks a good question and the
	  helper carefully reveals the right cards, it is possible to
	  complete the combo in a single exchange. This is how you get
	  the maximum <b>bonus of $0.05 per round</b>. If the combo is
	  not completed after the first question, or if additional
	  cards not in the target combo are revealed, you will not
	  receive the bonus, so pay attention to your choices! Once
	  the combo is completed, you will <b>switch roles</b> and
	  advance to the next round.  There are a total of <b>6
	  rounds</b>. After the final round you will answer a few more
	  questions and be on your way.
	</p>
	
	<p>
	  A few final notes: First, since you are playing with
	  another player, you may see a screen like this before the game
	  begins:
	<p>
	  <center><img src="images/waitScreen.png" alt="initial matcher's board"
		       style="width:700px;height:150px">
	  </center>
	</p>
	<p>
	  Just hold tight. Another player should join the game within
	  the next few minutes. If you're in the waiting room 5 minutes
	  without another player joining, please return the HIT and try
	  again later!
	</p>

	<p>
	  Second, please be respectful of the worker you're playing
	  with: their bonus payment depends on your performance as
	  well, so please pay close attention and try to be as
	  responsive and helpful as possible.
	</p>
	
	<p>
	  Finally, please DO NOT refresh the page at any point once
	  you start the game (including the waiting page). If you
	  refresh, you will not be able to rejoin the game you were in
	  and you may not be able to submit the HIT. <br> Thank you!
	</p>

	<h3>
	  Please fill out this short quiz below before getting started.
	  Good luck and have fun!
	</h3>
	
      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">
	
	<br>
	The Seeker is trying to fool the Helper into revealing unhelpful cards.
	<br>
	<input type="radio" name="dgoal" value="no"> True
	<br>
	<input type="radio" name="dgoal" value="yes"> False
	<br>

	<br>
	The Helper aims to complete the Seeker's target combo by revealing cards.
	<br>
	<input type="radio" name="mgoal" value="yes"> True
	<br>
	<input type="radio" name="mgoal" value="no"> False
	<br>

	<br>
	The Seeker must pick a single card to ask about (i.e. Where is the <b>jack of hearts</b>?)
	<br>
	<input type="radio" name="message" value="yes"> True
	<br>
	<input type="radio" name="message" value="no"> False
	<br>

	<br>
	The Seeker and Helper are both aware of all the <b>possible</b> combos on each round..
	<br>
	<input type="radio" name="location" value="yes"> True
	<br>
	<input type="radio" name="location" value="no"> False
	<br>

	<br>
	Imagine the following round: you are the Helper and there is
	only <b>one</b> possible combo. What would you need to do to
	get a bonus?
	<p>
	  <center><img src="images/singleCombo.png" alt="single possible combo"
		       style="width:500px;height:323px">
	  </center>
	</p>	
	<br>
	<input type="radio" name="comp" value="no"> Only reveal the six of diamonds (the first card).
	<br>
	<input type="radio" name="comp" value="yes"> Reveal <b>both</b> the queen of diamonds and three of clubs.
	<br>
	<input type="radio" name="comp" value="no"> Reveal the five of clubs.
	<br>

	<br>
	It is possible to do this HIT more than once.
        <br>
        <input type="radio" name="completed" value="no"> True
        <br>
        <input type="radio" name="completed" value="yes"> False
        <br>

	<br>
	<input id="quiz_submit" type="submit" value="Submit">
	<br>
	<br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. Try again. </div>
      </div> <!-- /container -->
    </div>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="message"]:checked').val();
        var ans4 = $('input[name="comp"]:checked').val();
        var ans5 = $('input[name="location"]:checked').val();
        var ans6 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" && 
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes") { 
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo
			    + "&counter=" + counter);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="/lib/js/bootstrap.min.js"></script>
  </body>
</html>
